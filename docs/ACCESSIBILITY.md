# アクセシビリティガイドライン

## WCAG 2.2 準拠目標

本アプリケーションは、Web Content Accessibility Guidelines (WCAG) 2.2に準拠し、すべてのユーザーがアクセス可能なサービスを目指します。

### 準拠レベル

- **レベル A**: **必須** - すべての基準を満たす
- **レベル AA**: **目標** - 可能な限り多くの基準を満たす
- **レベル AAA**: 部分的に対応

## WCAG 2.2 レベル A 必須要件

### 1. 知覚可能（Perceivable）

#### 1.1 代替テキスト
- [ ] すべての非テキストコンテンツに代替テキストを提供
- [ ] アイコンに適切なラベル
- [ ] 装飾的な画像は代替テキストを空にする

#### 1.2 時間依存メディア
- [ ] 動画がある場合はキャプションを提供（現状なし）

#### 1.3 適応可能
- [x] 情報と構造を保持したまま異なる方法で提示可能
- [x] 意味のある順序でコンテンツを配置
- [ ] 指示が形、サイズ、視覚的位置、方向、音だけに依存しない

#### 1.4 識別可能
- [ ] 色だけに依存しない情報伝達
- [ ] 音声の自動再生なし（該当なし）

### 2. 操作可能（Operable）

#### 2.1 キーボードアクセス可能
- [ ] すべての機能がキーボードで操作可能
- [ ] キーボードトラップなし

#### 2.2 十分な時間
- [ ] タイミング調整可能（セッションタイムアウトなど）
- [ ] 一時停止、停止、非表示が可能

#### 2.3 発作と身体的反応
- [ ] 1秒間に3回以上の点滅なし

#### 2.4 ナビゲート可能
- [x] 反復するブロックをスキップできる
- [x] ページタイトルが主題または目的を説明
- [x] フォーカス順序が意味と操作性を保持
- [ ] リンクの目的が明確

#### 2.5 入力方式
- [ ] ポインタジェスチャー（スワイプ等）に代替操作を提供
- [ ] ポインタキャンセル可能
- [x] ラベルに名前が含まれる

### 3. 理解可能（Understandable）

#### 3.1 読みやすい
- [x] ページの言語が明確（日本語）

#### 3.2 予測可能
- [x] フォーカス時に予期しない変化なし
- [x] 入力時に予期しない変化なし

#### 3.3 入力支援
- [ ] エラー識別（エラー時に明確な通知）
- [ ] ラベルまたは説明の提供

### 4. 堅牢（Robust）

#### 4.1 互換性
- [ ] 構文解析（正しいHTML/React Native構造）
- [x] 名前、役割、値の提供

## WCAG 2.2 レベル AA 目標要件

### 1. 知覚可能

#### 1.3 適応可能
- [ ] 向きの制限なし（縦横両対応）

#### 1.4 識別可能
- [ ] コントラスト比（最小）: テキスト 4.5:1、大きなテキスト 3:1
- [ ] テキストのサイズ変更: 200%まで拡大可能
- [ ] 画像化された文字を使用しない
- [ ] リフロー: 横スクロールなしで読める

### 2. 操作可能

#### 2.4 ナビゲート可能
- [ ] 複数の方法でページを見つけられる
- [x] 見出しとラベルが主題または目的を説明
- [x] フォーカスが視覚的に確認可能

#### 2.5 入力方式
- [ ] ターゲットサイズ: 最小 24x24 CSS ピクセル

### 3. 理解可能

#### 3.1 読みやすい
- [ ] 言語の変更を識別（多言語対応時）

#### 3.2 予測可能
- [x] 一貫したナビゲーション
- [x] 一貫した識別

#### 3.3 入力支援
- [ ] エラー提案
- [ ] エラー防止（法的、金融、データ）

## React Native 固有の実装

### アクセシビリティプロパティ

```typescript
// 基本的なアクセシビリティ設定
<TouchableOpacity
  accessible={true}
  accessibilityLabel="店舗を選択"
  accessibilityHint="タップすると店舗のメニューが表示されます"
  accessibilityRole="button"
>

// 状態の通知
<View
  accessibilityLiveRegion="polite"
  accessibilityValue={{ text: `${count}件のメニュー` }}
>

// スクリーンリーダー対応
<Text
  importantForAccessibility="yes"
  accessibilityElementsHidden={false}
>
```

## テスト方法

### iOS
- VoiceOver を有効にして操作確認
- Settings > Accessibility > Display & Text Size でテキストサイズ変更

### Android
- TalkBack を有効にして操作確認
- Settings > Accessibility > Font Size でフォントサイズ変更

### 自動テスト
```bash
# アクセシビリティテストツール（予定）
npm run test:a11y
```

## チェックリスト

### 開発時チェック
- [ ] すべてのインタラクティブ要素にラベルを設定
- [ ] カラーコントラスト比を確認（4.5:1以上）
- [ ] キーボード操作を確認
- [ ] スクリーンリーダーでテスト
- [ ] エラーメッセージが明確か確認

### リリース前チェック
- [ ] WCAG 2.2 レベル A のすべての基準をクリア
- [ ] 可能な限りレベル AA の基準をクリア
- [ ] アクセシビリティテスト完了
- [ ] ユーザビリティテスト実施

## 実装優先順位

### 即座に対応（レベル A 必須）
1. 代替テキストの追加
2. カラーコントラストの改善
3. キーボードナビゲーション
4. エラー識別の改善

### 次のフェーズ（レベル AA 目標）
1. タッチターゲットサイズの拡大（24x24px以上）
2. テキストサイズ200%対応
3. 向きの制限解除
4. エラー提案機能

## 参考資料

- [WCAG 2.2](https://www.w3.org/WAI/WCAG22/quickref/)
- [React Native Accessibility](https://reactnative.dev/docs/accessibility)
- [iOS Accessibility Guidelines](https://developer.apple.com/accessibility/)
- [Android Accessibility Guidelines](https://developer.android.com/guide/topics/ui/accessibility)

---

Last Updated: 2025-08-28